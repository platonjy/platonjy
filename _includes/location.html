<!-- 오시는 길 (Location - Kakao Maps Hardcoded) 섹션 -->
<section class="page-section" id="location"> <!-- 네비게이션 링크와 ID 일치 -->
  <div class="container">
    <div class="row">
      <div class="col-lg-12 text-center">
        <h2 class="section-heading text-uppercase">오시는 길</h2>
        <h3 class="section-subheading text-muted" style="margin-bottom: 30px;">Our location</h3>
        <!-- 카카오맵 표시 영역 -->
        <div id="kakaoMapContainer" style="width:100%; margin-bottom: 20px;">
          <!-- 높이는 아래 <style> 태그에서 CSS로 제어합니다. -->
        </div>
        <!-- 정보 표시 (주소, 길찾기 등) - 지도 컨테이너와 형제 레벨로 위치해야 함 -->
		<div class="location-details text-center">
		  <!-- 지도 버튼 영역 -->
		  <div class="d-flex flex-wrap justify-content-center align-items-stretch mb-4">
		    <!-- 카카오맵 -->
		    <a href="https://map.kakao.com/link/map/플라톤학원 진영,35.317525,128.724869" target="_blank" class="btn btn-warning btn-sm m-1 flex-fill">
		      카카오<i class="fas fa-map-marker-alt mr-1"></i>
		    </a>
		    <a href="https://map.kakao.com/link/to/플라톤학원 진영,35.317525,128.724869" target="_blank" class="btn btn-warning btn-sm m-1 flex-fill">
		      길찾기<i class="fas fa-directions mr-1"></i>
		    </a>

		    <!-- 네이버맵 -->
		    <a href="https://map.naver.com/p/search/플라톤학원 진영" target="_blank" class="btn btn-success btn-sm m-1 flex-fill">
		      네이버<i class="fas fa-map-marker-alt mr-1"></i>
		    </a>
		  </div>

		  <!-- 상세정보 -->
		  <div class="local_area mt-4 text-left mx-auto" style="max-width: 580px;">
		    <dl class="list_info">
		      <dt class="item_title font-weight-bold mt-3 mb-1">
		        <span class="nicon nicon_pin2"></span>진영 플라톤학원
		      </dt>
		      <dd class="item_description text-secondary">
		        <span class="text">경상남도 김해시 진영읍 김해대로361번길 12 씨티프라자 604호  <br>(IBK기업은행 진영지점 옆, 올리브영 건물 6층)</span>
		      </dd>
		      <dt class="item_title font-weight-bold mt-3 mb-1">
		        <span class="nicon nicon_pin2"></span>주차 정보
		      </dt>
		      <dd class="item_description text-secondary">
		        <span class="text">진영공용공영주차장 이용 (도보 약 4분 거리)</span>
		      </dd>

		      <dt class="item_title font-weight-bold mt-3 mb-1">
		        <span class="nicon nicon_clock"></span>이용 시간
		      </dt>
		      <dd class="item_description text-secondary">
		        <span class="text">평일 14:30 ~ 24:00<br>토요일 09:00 ~ 22:00<br>일요일 09:00 ~ 22:00</span>
		      </dd>

		      <dt class="item_title font-weight-bold mt-3 mb-1">
		        <span class="nicon nicon_tel"></span>전화번호
		      </dt>
		      <dd class="item_description text-secondary">
		        <span class="text">055-342-7377</span>
		      </dd>
		    </dl>
		  </div>
		</div>
      </div>
    </div>
  </div>
</section>

<!-- 이 파일 내에 포함될 스타일 -->
<style>
  /* 기본 지도 컨테이너 스타일 */
  #kakaoMapContainer {
    width: 100%;
    height: 350px; /* PC에서의 기본 높이 */
    /* margin-bottom은 div에 직접 적용했으므로 여기선 생략 가능 */
  }

  /* 모바일 화면 (예: 화면 너비가 768px 이하일 때) */
  @media (max-width: 768px) {
    #kakaoMapContainer {
      height: 200px; /* 모바일에서의 높이 (더 작게 조절) */
    }
  }

  /* 더 작은 모바일 화면 (예: 화면 너비가 480px 이하일 때) */
  @media (max-width: 480px) {
    #kakaoMapContainer {
      height: 180px; /* 더 작은 모바일에서의 높이 */
    }
  }

  /* 버튼 및 기타 스타일 (기존 테마와 충돌하지 않도록 필요한 최소한만 정의하거나, 테마 CSS 활용) */
  .map_ico_btn_wrap a.btn_map,
  .map_ico_btn_wrap a.btn_roadmap {
    display: inline-block;
    padding: 8px 12px;
    text-decoration: none;
    border-radius: 4px;
    font-size: 0.9em;
    /* 테마의 버튼 스타일 클래스(예: .btn .btn-primary)를 사용하거나,
       여기에 직접 background-color, color 등을 정의하세요. */
    /* 예: background-color: #007bff; color: white; */
  }
  /* .theme_background, .nicon, .nicon_pin1, .nicon_pathfind2 등은
     웹사이트의 전체 CSS에 정의되어 있다고 가정합니다. */
</style>

<!-- 카카오맵 API 로드 (발급받은 JavaScript 앱 키로 교체) -->
<!-- 이 스크립트 태그는 페이지 내에서 한 번만 로드되어야 합니다. (예: _layouts/default.html 의 </body> 직전) -->
<!-- 이 include 파일이 여러 페이지에서 사용된다면, API 스크립트 로드는 레이아웃 파일로 옮기는 것이 좋습니다. -->
<!-- 여기서는 이 파일만으로 작동하도록 포함합니다. -->
<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=3002f03bf5465e4bd274146a8bacedf0"></script>
<script>
  // kakao.maps.load 함수를 사용하여 API 로드가 완료된 후 지도 관련 코드를 실행합니다.
  if (typeof kakao !== 'undefined' && typeof kakao.maps !== 'undefined' && typeof kakao.maps.load === 'function') {
    kakao.maps.load(function() {
      var container = document.getElementById('kakaoMapContainer');
      if (!container) {
        console.error("카카오맵 컨테이너(#kakaoMapContainer)를 찾을 수 없습니다. DOM 구조를 확인하세요.");
        return; // 컨테이너가 없으면 더 이상 진행하지 않음
      }

      var mapLat = 37.5262832;
      var mapLng = 127.133687;
      var mapLevel = 3; // 카카오맵 확대 레벨 (1~14, 숫자가 작을수록 확대)
      var locationName = "중흥교회";
      var locationAddress = "서울특별시 강동구 성내동 430-2";

      var options = {
        center: new kakao.maps.LatLng(mapLat, mapLng),
        level: mapLevel
      };

      var map = new kakao.maps.Map(container, options);

      var markerPosition  = new kakao.maps.LatLng(mapLat, mapLng);
      var marker = new kakao.maps.Marker({
        position: markerPosition
      });
      marker.setMap(map);

      var iwContent = '<div style="padding:5px; text-align:center;">' + locationName + '<br><a href="https://map.kakao.com/link/map/' + locationName + ',' + mapLat + ',' + mapLng + '" style="color:blue" target="_blank">큰지도보기</a> <a href="https://map.kakao.com/link/to/' + locationName + ',' + mapLat + ',' + mapLng + '" style="color:blue" target="_blank">길찾기</a></div>';
      var infowindow = new kakao.maps.InfoWindow({
        content : iwContent
      });

      kakao.maps.event.addListener(marker, 'click', function() {
          infowindow.open(map, marker);
      });

      var mapTypeControl = new kakao.maps.MapTypeControl();
      map.addControl(mapTypeControl, kakao.maps.ControlPosition.TOPRIGHT);

      var zoomControl = new kakao.maps.ZoomControl();
      map.addControl(zoomControl, kakao.maps.ControlPosition.RIGHT);
    });
  } else {
    // API 스크립트 로드 실패 또는 kakao.maps.load 사용 불가 시
    document.addEventListener('DOMContentLoaded', function() {
        var mapContainerFallback = document.getElementById('kakaoMapContainer');
        if (typeof kakao === 'undefined' || typeof kakao.maps === 'undefined') {
            console.error("카카오맵 API 스크립트가 로드되지 않았거나 kakao 객체를 찾을 수 없습니다. API 키, 도메인 등록, 스크립트 태그 위치를 확인하세요.");
            if (mapContainerFallback) {
                mapContainerFallback.innerHTML = '<p style="text-align:center; padding: 20px; border: 1px solid #ccc;">지도를 불러오는데 실패했습니다. 관리자에게 문의하세요.</p>';
                // 맵 컨테이너의 높이가 CSS로 설정되어 있어야 이 메시지가 보입니다.
                // 또는 여기서 직접 높이를 설정할 수 있습니다.
                // mapContainerFallback.style.height = "300px"; // 예시 높이
            }
            return;
        }

        // DOMContentLoaded 후 지도 초기화 코드 (kakao.maps.load 실패 시 대체 실행)
        // 이 부분은 kakao.maps.load 콜백 내부와 동일한 로직을 가집니다.
        var container = mapContainerFallback; // 이미 위에서 가져왔으므로 재사용
        if (!container) {
            console.error("카카오맵 컨테이너(#kakaoMapContainer)를 찾을 수 없습니다.");
            return;
        }
        var mapLat = 37.5262832;
        var mapLng = 127.133687;
        var mapLevel = 3;
        var locationName = "중흥교회";
        var locationAddress = "서울특별시 강동구 성내동 430-2";

        var options = { center: new kakao.maps.LatLng(mapLat, mapLng), level: mapLevel };
        var map = new kakao.maps.Map(container, options);
        var markerPosition  = new kakao.maps.LatLng(mapLat, mapLng);
        var marker = new kakao.maps.Marker({ position: markerPosition });
        marker.setMap(map);
        var iwContent = '<div style="padding:5px; text-align:center;">' + locationName + '<br><a href="https://map.kakao.com/link/map/' + locationName + ',' + mapLat + ',' + mapLng + '" style="color:blue" target="_blank">큰지도보기</a> <a href="https://map.kakao.com/link/to/' + locationName + ',' + mapLat + ',' + mapLng + '" style="color:blue" target="_blank">길찾기</a></div>';
        var infowindow = new kakao.maps.InfoWindow({ content : iwContent });
        kakao.maps.event.addListener(marker, 'click', function() { infowindow.open(map, marker); });
        var mapTypeControl = new kakao.maps.MapTypeControl();
        map.addControl(mapTypeControl, kakao.maps.ControlPosition.TOPRIGHT);
        var zoomControl = new kakao.maps.ZoomControl();
        map.addControl(zoomControl, kakao.maps.ControlPosition.RIGHT);
    });
    console.warn("kakao.maps.load 함수를 사용할 수 없어 DOMContentLoaded로 대체 실행합니다. API 스크립트 로드 방식을 확인하는 것이 좋습니다.");
  }
</script>